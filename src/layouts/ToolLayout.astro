---
import BaseLayout from "@/layouts/BaseLayout.astro";

interface Props {
  title: string;
  description: string;
  ogImage?: string;
  canonicalPath?: string;
  structuredData?: object;
  keywords?: string;
}

var {
  title,
  description,
  ogImage = "https://meysam.io/og-image.png",
  canonicalPath,
  structuredData,
  keywords,
} = Astro.props;

var fullTitle = title.includes("Meysam") ? title : title + " | Meysam";
var canonicalURL = new URL(canonicalPath || Astro.url.pathname, Astro.site);

var defaultToolKeywords =
  "developer tools, free online tools, DevOps tools, web tools, no signup required";
var finalKeywords = keywords || defaultToolKeywords;

var breadcrumbStructuredData = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  itemListElement: [
    {
      "@type": "ListItem",
      position: 1,
      name: "Home",
      item: "https://meysam.io",
    },
    {
      "@type": "ListItem",
      position: 2,
      name: "Tools",
      item: "https://meysam.io/tools",
    },
    {
      "@type": "ListItem",
      position: 3,
      name: title,
      item: canonicalURL.toString(),
    },
  ],
};

var allStructuredData = structuredData
  ? [structuredData, breadcrumbStructuredData]
  : [breadcrumbStructuredData];
---

<BaseLayout
  title={fullTitle}
  description={description}
  ogImage={ogImage}
  canonicalPath={canonicalPath}
  structuredData={allStructuredData}
  noDefaultStructuredData={true}
  keywords={finalKeywords}
>
  <Fragment slot="head">
    <slot name="head" />
  </Fragment>

  <div class="tool-main">
    <div class="container">
      <nav class="breadcrumb" aria-label="Breadcrumb">
        <ol>
          <li><a href="/">Home</a></li>
          <li><a href="/tools">Tools</a></li>
          <li aria-current="page">{title}</li>
        </ol>
      </nav>

      <slot />
    </div>
  </div>
</BaseLayout>

<style is:global>
  .tool-main {
    padding-bottom: var(--space-3xl);
  }

  .breadcrumb {
    margin-bottom: var(--space-lg);
    padding: var(--space-md) 0;
  }

  .breadcrumb ol {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: var(--space-xs);
    list-style: none;
    padding: 0;
    margin: 0;
    font-size: var(--text-sm);
  }

  .breadcrumb li {
    display: flex;
    align-items: center;
    color: var(--color-text-dim);
  }

  .breadcrumb li:not(:last-child)::after {
    content: "/";
    margin-left: var(--space-xs);
    color: var(--color-text-dim);
  }

  .breadcrumb a {
    color: var(--color-text-muted);
    text-decoration: none;
    transition: color var(--transition-fast);
  }

  .breadcrumb a:hover {
    color: var(--color-accent-light);
  }

  .breadcrumb [aria-current="page"] {
    color: var(--color-text);
  }

  .tool-header {
    text-align: center;
    margin-bottom: var(--space-xl);
  }

  .tool-header h1 {
    margin-bottom: var(--space-sm);
  }

  .tool-header .subtitle {
    font-size: var(--text-lg);
    color: var(--color-text-muted);
    max-width: 600px;
    margin: 0 auto;
  }

  .tool-content {
    max-width: 900px;
    margin: 0 auto;
  }

  .tool-card {
    background: var(--color-bg-card);
    border: 1px solid var(--color-border);
    border-radius: var(--border-radius);
    padding: var(--space-xl);
    margin-bottom: var(--space-xl);
  }

  @media (max-width: 768px) {
    .tool-card {
      padding: var(--space-lg);
    }
  }
</style>
