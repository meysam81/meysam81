---
import ToolLayout from "@/layouts/ToolLayout.astro";
import IdeaValidatorTool from "@/components/vue/tools/IdeaValidatorTool.vue";
import FAQAccordion from "@/components/FAQAccordion.astro";
import ToolNewsletterCTA from "@/components/ToolNewsletterCTA.astro";
import {
  getToolBySlugOrThrow,
  generateToolStructuredData,
  generateFAQStructuredData,
} from "@/data/tools";

var tool = getToolBySlugOrThrow("saas-idea-validator");
var structuredData = generateToolStructuredData(tool);
var faqData = generateFAQStructuredData(tool.faqs);
---

<ToolLayout
  title={tool.title}
  description={tool.description}
  ogImage={tool.ogImage}
  canonicalPath={"/tools/" + tool.slug}
  structuredData={structuredData}
  keywords={tool.keywords}
>
  {
    faqData && (
      <Fragment slot="head">
        <script type="application/ld+json" set:html={JSON.stringify(faqData)} />
      </Fragment>
    )
  }

  <!-- Tool Header -->
  <div class="tool-header">
    <h1>{tool.title}</h1>
    <p class="subtitle">
      Score your startup idea against 20 battle-tested criteria. Objective
      feedback before you invest months building.
    </p>
  </div>

  <div class="tool-content validator-tool">
    <!-- Main Tool with Vue Island -->
    <IdeaValidatorTool client:only="vue" />

    <!-- Newsletter Section -->
    <div class="tool-card" id="newsletter-section">
      <ToolNewsletterCTA
        pageUrl="/tools/saas-idea-validator"
        variant="idea-validator-tool"
        title="Want to improve your score?"
        description="Get weekly validation insights from my journey building products."
        buttonText="Get Insights"
        formNote="Join 1,500+ founders. Weekly tips, zero spam."
      />
    </div>

    <!-- FAQ Section -->
    <div class="tool-card">
      <FAQAccordion faqs={tool.faqs} />
    </div>
  </div>
</ToolLayout>
