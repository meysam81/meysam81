---
import type { HTMLAttributes } from "astro/types";

interface Props extends HTMLAttributes<"input"> {
  label?: string;
  error?: string;
  hint?: string;
}

var { label, error, hint, id, class: className, ...attrs } = Astro.props;

var inputId = id || `input-${Math.random().toString(36).slice(2, 9)}`;
var baseClasses =
  "w-full px-4 py-3.5 text-base font-[var(--font-sans)] bg-[var(--color-bg-card)] border border-[var(--color-border)] rounded-[var(--radius-sm)] text-[var(--color-text)] transition-all duration-[var(--duration-fast)] placeholder:text-[var(--color-text-dim)] focus:outline-none focus:border-[var(--color-accent)] focus:shadow-[var(--shadow-focus)]";
var errorClasses = error
  ? "border-[var(--color-error)] focus:border-[var(--color-error)]"
  : "";
var classes = [baseClasses, errorClasses, className].filter(Boolean).join(" ");
---

<div class="flex flex-col gap-[var(--space-xs)]">
  {
    label && (
      <label for={inputId} class="text-sm font-medium text-[var(--color-text)]">
        {label}
      </label>
    )
  }
  <input id={inputId} class={classes} {...attrs} />
  {
    hint && !error && (
      <span class="text-xs text-[var(--color-text-dim)]">{hint}</span>
    )
  }
  {error && <span class="text-xs text-[var(--color-error)]">{error}</span>}
</div>
